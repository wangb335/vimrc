# 🚀 Vim 配置文件 (vimrc)

> 📝 这是一个非常清晰且结构化的 Vim 配置文档，下面是对该文档的一些补充和完善，以帮助用户更好地理解和使用该配置。

## ✨ 主要特性

* 🔍 **智能搜索** - 高亮显示搜索结果，实时匹配，忽略大小写
* 🎨 **语法高亮** - 自动识别并高亮显示不同语言的语法
* 📊 **界面优化** - 显示行号、高亮当前行、显示状态栏
* 🧩 **代码缩进** - 智能缩进，Tab 转空格，保持代码整洁
* 📝 **文件模板** - 自动添加文件头信息（特别适用于 Shell 脚本）
* 🔄 **自动更新** - 自动更新文件头中的时间和文件名信息
* 🖱️ **鼠标支持** - 支持鼠标点击定位、选择文本和弹出菜单
* 📏 **智能换行** - 自动换行且不会在单词中间断行，保持缩进

---

## 📋 详细配置说明

### 🛠️ 基本设置

| 类别         | 配置项                                                             | 说明                               |
| ---------- | --------------------------------------------------------------- | -------------------------------- |
| 📏 **缩进**  | `softtabstop=4`<br>`tabstop=4`<br>`shiftwidth=4`<br>`expandtab` | 设置缩进为4个空格<br>Tab键转换为空格           |
| 🔍 **搜索**  | `hlsearch`<br>`ignorecase`<br>`smartcase`<br>`incsearch`        | 高亮搜索结果<br>智能大小写匹配<br>实时显示匹配结果    |
| 🎨 **界面**  | `number`<br>`cursorline`<br>`ruler`<br>`laststatus=2`           | 显示行号<br>高亮当前行<br>显示光标位置<br>显示状态栏 |
| 🔤 **编码**  | `encoding=utf-8`<br>`fileencodings=utf-8,...`                   | 设置UTF-8为默认编码<br>支持多种编码格式         |
| 🖱️ **鼠标** | `mouse=a`<br>`mousemodel=popup`<br>`selection=exclusive`        | 启用鼠标支持<br>右键弹出菜单<br>精确选择模式       |
| 📏 **换行**  | `wrap`<br>`linebreak`<br>`breakindent`                          | 启用自动换行<br>不在单词中间断行<br>换行后保持缩进    |

### 🎯 功能快捷键

* <kbd>F4</kbd> - 调用 `TitleDet()` 函数，添加或更新文件头信息

---

## ⌨️ Vim 按键指南

### 🔠 基本编辑模式

| 按键             | 功能描述                 |
| -------------- | -------------------- |
| <kbd>i</kbd>   | 📝 进入插入模式，在光标位置开始输入  |
| <kbd>a</kbd>   | 📝 进入插入模式，在光标后开始输入   |
| <kbd>o</kbd>   | 📝 在当前行下方新建一行并进入插入模式 |
| <kbd>O</kbd>   | 📝 在当前行上方新建一行并进入插入模式 |

## 🚀 安装与配置

### 1. 获取配置文件方法

#### 1.1 从 GitHub 克隆仓库

```bash
git clone https://github.com/wangb335/vimrc.git
cd vimrc
```

#### 1.2 直接下载配置文件

```bash
wget https://github.com/wangb335/vimrc/raw/main/vimrc -O ~/.vimrc
```

#### 1.3 从原始仓库下载

```bash
wget https://raw.githubusercontent.com/wangb335/vimrc/main/vimrc -O ~/.vimrc
```

### 2. 系统级安装（推荐）

将配置放入/etc/skel/目录，使所有新用户自动继承此配置：

```bash
sudo cp vimrc /etc/skel/.vimrc
```

### 3. 为现有用户安装

```bash
# 单个用户安装
cp vimrc ~/.vimrc

# 或为所有现有用户安装（需要root权限）
for user in /home/*; do 
  [ -d "$user" ] && sudo cp vimrc "$user/.vimrc"
done
```

### 4. 验证安装

```bash
vim --version | grep vimrc  # 应显示加载的vimrc路径
```

### 注意事项

1. /etc/skel/方法只影响之后创建的新用户
2. 需要确保vimrc文件权限正确（644）
3. 如果存在用户特定的~/.vim/目录，可能需要额外配置
4. 建议先备份原有配置

### 卸载方法

```bash
sudo rm /etc/skel/.vimrc
rm ~/.vimrc
```

| <kbd>Esc</kbd> | 🔙 返回到普通模式           |

### 🔄 移动光标

| 按键            | 功能描述          |
| ------------- | ------------- |
| <kbd>h</kbd>  | ⬅️ 向左移动光标     |
| <kbd>j</kbd>  | ⬇️ 向下移动光标     |
| <kbd>k</kbd>  | ⬆️ 向上移动光标     |
| <kbd>l</kbd>  | ➡️ 向右移动光标     |
| <kbd>w</kbd>  | ➡️ 移动到下一个单词开头 |
| <kbd>b</kbd>  | ⬅️ 移动到上一个单词开头 |
| <kbd>0</kbd>  | ⏮️ 移动到行首      |
| <kbd>\$</kbd> | ⏭️ 移动到行尾      |
| <kbd>gg</kbd> | ⏫ 移动到文件开头     |
| <kbd>G</kbd>  | ⏬ 移动到文件末尾     |

### 📋 复制粘贴

| 按键            | 功能描述      |
| ------------- | --------- |
| <kbd>y</kbd>  | 📑 复制选中内容 |
| <kbd>yy</kbd> | 📑 复制当前行  |
| <kbd>p</kbd>  | 📋 在光标后粘贴 |
| <kbd>P</kbd>  | 📋 在光标前粘贴 |
| <kbd>dd</kbd> | ✂️ 剪切当前行  |

### 🔍 搜索替换

| 按键                       | 功能描述        |
| ------------------------ | ----------- |
| <kbd>/pattern</kbd>      | 🔎 向下搜索指定模式 |
| <kbd>?pattern</kbd>      | 🔍 向上搜索指定模式 |
| <kbd>n</kbd>             | ⏩ 查找下一个匹配项  |
| <kbd>N</kbd>             | ⏪ 查找上一个匹配项  |
| <kbd>:%s/old/new/g</kbd> | 🔄 全文替换     |

### 📝 文件操作

| 按键              | 功能描述       |
| --------------- | ---------- |
| <kbd>\:w</kbd>  | 💾 保存文件    |
| <kbd>\:q</kbd>  | 🚪 退出      |
| <kbd>\:wq</kbd> | 💾🚪 保存并退出 |
| <kbd>\:q!</kbd> | 🚫 强制退出不保存 |

### 🎛️ 本配置特有功能

| 按键            | 功能描述                      |
| ------------- | ------------------------- |
| <kbd>F4</kbd> | 📄 添加/更新文件头信息（适用于Shell脚本） |

---

## 📝 文件头模板

对于 Shell 脚本（.sh 文件），按 <kbd>F4</kbd> 会自动添加如下格式的文件头：

```bash
#!/bin/bash
#
#********************************************************
#author(作者):         Archangel
#version(版本):        2025-08-29
#date(时间):           Thu Aug 29 15:49:03 2025
#FileName(文件名):     example.sh
#description(描述):    
#********************************************************
#-----------------------------------------------------------------------------------

#------------------------------- Environment Variable ------------------------------

#------------------------------- Function Definetions ------------------------------

#---------------------------------- Shell Main Body --------------------------------
```

---

## 🔄 工作流程

```mermaid
flowchart TD
    A[打开文件] --> B{是否有文件头?}
    B -->|是| C[按F4更新文件头]
    B -->|否| D[按F4添加文件头]
    C --> E[继续编辑文件]
    D --> E
    E --> F[保存并退出]
```

---

## ⚙️ 函数说明

| 函数名             | 功能描述                    |
| --------------- | ----------------------- |
| `AddTitle()`    | 📄 根据文件类型添加适当的文件头模板     |
| `UpdateTitle()` | 🔄 更新已有文件头中的时间和文件名信息    |
| `TitleDet()`    | 🔍 检测文件是否已有文件头，决定添加还是更新 |

---

## 💡 使用提示

* ⚠️ **重要**: 使用 `set paste` 模式可以避免粘贴时的自动缩进问题
* 🔄 定期按 <kbd>F4</kbd> 更新您的文件头信息，保持文档的时效性
* 🎨 当前使用 `elflord` 配色方案，您可以根据个人喜好修改

---

## 📦 输出文件

| 文件类型           | 说明                    |
| -------------- | --------------------- |
| 📜 **Shell脚本** | 自动添加包含作者、版本、时间等信息的文件头 |
| 📄 **其他文件**    | 保持原样，不添加文件头           |

---

*🌟 享受高效的 Vim 编辑体验！*
